<!--
File: show_profile.html
Author: Esha Wadher (eshaaw@bu.edu), 02/13/2026
Description:
Template that displays a single user's profile in the Mini Insta
application. This page receives one Profile object from the view
based on the selected profile's primary key and shows the user's
display name, username, profile image, biography text, and join date.
-->

{% extends 'mini_insta/base.html' %}
{% block content %}
<div class="content-container">
    <h1>{{ profile.display_name }}</h1>
    <h2>@{{ profile.username }}</h2>

    <div style="max-width: 500px;">
        <img src="{{ profile.profile_image_url }}" alt="{{ profile.username }}"
            style="width: 100%; border-radius: 10px;">
    </div>

    <div style="margin-top: 20px;">
        <h3>Bio</h3>
        <p>{{ profile.bio_text }}</p>

        <h3>Member Since</h3>
        <p>{{ profile.join_date }}</p>

        <a href="{% url 'update_profile' profile.pk %}">
            <button>Update Profile</button>
        </a>
    </div>
    <h3> Posts </h3>
    {% for post in profile.get_all_posts %}
    <div style="border: 1px solid #ccc; border-radius: 10px; padding: 15px; margin: 15px 0;">

        <!-- Show first photo, or placeholder if none -->
        {% with photos=post.get_all_photos %}
        {% if photos %}
        <img src="{{ photos.first.image_url }}" alt="post image"
            style="width: 100%; max-width: 500px; border-radius: 8px;">
        {% else %}
        <img src="https://via.placeholder.com/500x300?text=No+Image" alt="no image"
            style="width: 100%; max-width: 500px; border-radius: 8px;">
        {% endif %}
        {% endwith %}

        <p>{{ post.caption }}</p>
        <p style="color: grey; font-size: 0.85em;">{{ post.timestamp }}</p>
        <a href="{% url 'show_post' post.pk %}">View Post</a>
    </div>
    {% empty %}
    <p>No posts yet.</p>
    {% endfor %}
</div>
{% endblock %}